
<h1 class="page-title">Class: Data_Value</h1>

<section>

    <!--==================================================
    =                   Overview
    ===================================================-->

    <header>
        <h2>
            <span class="ancestors"><a href="@link:/core/data-value.js.html">core/data-value.js</a>.</span>
            Data_Value
        </h2>

        <div class="container-overview">
            <div class="class-description">
                <p>
                    Represents a class storing a data value.                    
                </p>
            </div>
            <p>Base class: <span class="ancestors"><a href="@link:/core/evented-class.js/Evented_Class.html">core/evented-class.js:Evented_Class</a></span></p>
        </div>
    </header>

    <article>

        <dt>
            <h4 class="name" id="new_Data_Value"><span class="type-signature"></span>new Data_Value<span class="signature">(<span class="optional">spec</span>)</span><span class="type-signature"></span></h4>
        </dt>
        <dd>
            <div class="description">
                <p>Creates the Data_Value object.</p>
                <p>
                    The <code>spec</code> parameter can be an object with the following optional fields:
                    <ul>
                        <li><strong>context</strong> - set a context for the Data_Value object</li>
                        <li><strong>value</strong> - initializes the Data_Value object by the specified value</li>
                    </ul>
                </p>
            </div>

            <h5>Parameters:</h5>
            <table class="params">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Type</th>
                        <th>Argument</th>
                        <th class="last">Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="name"><code>spec</code></td>
                        <td class="type">
                            <span class="param-type">Object</span>
                        </td>
                        <td class="attributes">
                            &lt;optional><br>
                        </td>
                        <td class="description last"><p>Initialization object</p></td>
                    </tr>
                </tbody>
            </table>

            <h5>Example</h5>

            <pre class="prettyprint"><code>data_value = new Data_Value();
data_value = new Data_Value({ context: myContext });                
data_value = new Data_Value({ value: 31 });                
data_value = new Data_Value({ context: myContext, value: 31 });</code></pre>

        </dd>



        <!--==================================================
        =                   Methods
        ===================================================-->

        <h3 class="subsection-title">Methods</h3>

        <dl>

            <!-----------------------------------------
            |          get()
            ------------------------------------------>

            <dt>
                <h4 class="name" id="get"><span class="type-signature"></span>get<span class="signature">()</span><span class="type-signature"></span></h4>
            </dt>
            <dd>

                <div class="description">
                    <p>Returns the stored value (or <code>undefined</code> if not set).</p>
                </div>

                <h5>Example</h5>

                <pre class="prettyprint"><code>var data_value = new Data_Value();
data_value.get()  ==>  undefined
data_value.set(2014);
data_value.get()  ==>  2014</code></pre>

            </dd>

            <!-----------------------------------------
            |          value()
            ------------------------------------------>

            <dt>
                <h4 class="name" id="value"><span class="type-signature"></span>value<span class="signature">()</span><span class="type-signature"></span></h4>
            </dt>
            <dd>

                <div class="description">
                    <p>An alias for the <a href="#get">get()</a> method.</p>
                </div>


                <h5>Example</h5>

                <pre class="prettyprint"><code>var data_value = new Data_Value();
data_value.value()  ==>  undefined
data_value.set(2014);
data_value.value()  ==>  2014</code></pre>

            </dd>

            <!-----------------------------------------
            |          toObject()
            ------------------------------------------>

            <dt>
                <h4 class="name" id="toObject"><span class="type-signature"></span>toObject<span class="signature">()</span><span class="type-signature"></span></h4>
            </dt>
            <dd>

                <div class="description">
                    <p>Returns the stored value in fact (or <code>undefined</code> if not set), just like the <a href="#get">get()</a> method.</p>
                </div>


                <h5>Example</h5>

                <pre class="prettyprint"><code>var data_value = new Data_Value();
data_value.toObject()  ==>  undefined
data_value.set(2014);
data_value.toObject()  ==>  2014</code></pre>

            </dd>

            <!-----------------------------------------
            |          set(val)
            ------------------------------------------>

            <dt>
                <h4 class="name" id="set"><span class="type-signature"></span>set<span class="signature">(val)</span><span class="type-signature"></span></h4>
            </dt>
            <dd>

                <div class="description">
                    <p>Sets the stored value to <code>val</code>.
                    Then a "change" event is raised, passing the following object to the event listener:
<pre class="prettyprint"><code>{
    'old': old_value,
    'value': new_value // the "val" parameter of the set() method
}</code></pre>
                    </p>
                    <p>
                        Returns the new value.
                    </p>
                </div>

                <h5>Parameters:</h5>

                <table class="params">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Type</th>
                            <th class="last">Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="name"><code>val</code></td>
                            <td class="type"><span class="param-type">*</span></td>
                            <td class="description last"><p>New value</p></td>
                        </tr>
                    </tbody>
                </table>

                <h5>Example</h5>

                <pre class="prettyprint"><code>var data_value = new Data_Value();
data_value.get()  ==>  undefined
data_value.set(2014);
data_value.get()  ==>  2014</code></pre>

            </dd>

            <!-----------------------------------------
            |          toString()
            ------------------------------------------>

            <dt>
                <h4 class="name" id="toString"><span class="type-signature"></span>toString<span class="signature">()</span><span class="type-signature"></span></h4>
            </dt>
            <dd>

                <div class="description">
                    <p>Returns the stored value in fact (or <code>undefined</code> if not set), just like the <a href="#get">get()</a> method.</p>
                    <p><mark>The returned value is not converted to the <code>String</code> type.</mark></p>
                </div>

                <h5>Example</h5>

                <pre class="prettyprint"><code>var data_value = new Data_Value();
data_value.get()  ==>  undefined
data_value.set(2014);
data_value.toString()  ==>  2014  // Number!</code></pre>

            </dd>

            <!-----------------------------------------
            |          stringify()
            ------------------------------------------>

            <dt>
                <h4 class="name" id="stringify"><span class="type-signature"></span>stringify<span class="signature">()</span><span class="type-signature"></span></h4>
            </dt>
            <dd>

                <div class="description">
                    <p>Returns the stored value, adding a double quotes if the stored value have a <code>String</code> type.</p>
                    <p><mark>The returned value is not converted to the <code>String</code> type.</mark></p>
                </div>


                <h5>Example</h5>

                <pre class="prettyprint"><code>var data_value = new Data_Value();
data_value.get()  ==>  undefined
data_value.set(2014);
data_value.stringify()  ==>  2014  // Number!
data_value.set("2015");
data_value.stringify()  ==>  '"2015"'</code></pre>

            </dd>

            <!-----------------------------------------
            |          clone()
            ------------------------------------------>

            <dt>
                <h4 class="name" id="clone"><span class="type-signature"></span>clone<span class="signature">()</span><span class="type-signature"></span></h4>
            </dt>
            <dd>

                <div class="description">
                    <p>Returns a copy of the Data_Value object, initialized by the same value. Other properties (like context, parent etc.) are not cloned.</p>
                    <p><mark>The stored value itself is not deeply cloned: stored object will reference to the same object instance.</mark></p>
                </div>


                <h5>Example</h5>

                <pre class="prettyprint"><code>var data_value = null;
var data_value2 = null;
//
data_value = new Data_Value({ value: 31 });
data_value2 = data_value.clone();
data_value2.get()  ==>  31
//
var obj = { a: 1, b: 2 };
data_value = new Data_Value({ value: obj });
data_value2 = data_value.clone();
//
obj.a = 2; // change the stored object
data_value2.get()  ==>  { a: 2, b: 2 } // both data_value and data_value2 reference the same object</code></pre>

            </dd>

            <!-----------------------------------------
            |          _id()
            ------------------------------------------>

            <dt>
                <h4 class="name" id="_id"><span class="type-signature"></span>_id<span class="signature">()</span><span class="type-signature"></span></h4>
            </dt>
            <dd>

                <div class="description">
                    <p>Returns an object id.</p>
                    <p>
                    The id is assigned by the context.new_id() method when the _id() is called for the first time. 
                    If the context was not set in the Data_Value() constructor call, then _id() throws a 'DataValue should have context' exception.
                    </p>
                </div>


                <h5>Example</h5>

                <pre class="prettyprint"><code>var nextId = 7;
var myContext = { new_id: function (prefix) { return prefix + "_00" + nextId++; } };
//
var data_value = new Data_Value({ context: myContext });
data_value._id()  ==>  "data_value_007"
data_value._id()  ==>  "data_value_007" // the same as above, new_id() was not called</code></pre>

            </dd>

            <!-----------------------------------------
            |          parent(obj, index)
            ------------------------------------------>

            <dt>
                <h4 class="name" id="parent"><span class="type-signature"></span>parent<span class="signature">(<span class="optional">obj</span>, <span class="optional">index</span>)</span><span class="type-signature"></span></h4>
            </dt>
            <dd>

                <div class="description">
                    <p>When called without arguments: returns the current parent.</p>
                    <p>
                        When called with <code>obj</code> argument: sets the <code>obj</code> as a parent.<br/>
                        If the context was not set, then tries to set its context to the parent context (so, will be able to use the _id() method further).
                    </p>
                    <p>When called with <code>index</code> argument too: also sets an (internal) <code>_index</code> field.</p>
                </div>

                <h5>Parameters:</h5>

                <table class="params">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Type</th>
                            <th>Argument</th>
                            <th class="last">Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="name"><code>obj</code></td>
                            <td class="type"><span class="param-type">Object</span></td>
                            <td class="attributes">
                                &lt;optional><br>
                            </td>
                            <td class="description last"><p>New parent object</p></td>
                        </tr>
                        <tr>
                            <td class="name"><code>index</code></td>
                            <td class="type"><span class="param-type">Number</span></td>
                            <td class="attributes">
                                &lt;optional><br>
                            </td>
                            <td class="description last"><p>An index within the parent?</p></td>
                        </tr>
                    </tbody>
                </table>


                <h5>Example</h5>

                <pre class="prettyprint"><code>// no parent:
//
data_value = new Data_Value();
data_value.parent()  ==>  undefined
//
// set a parent with a context:
//
var nextId = 7;
var myContext = { new_id: function (prefix) { return prefix + "_00" + nextId++; } };
var myParent = { _context: myContext };
//
data_value.parent(myParent);
data_value.parent()  ==>  myParent
data_value._id()  ==>  "data_value_007"</code></pre>

            </dd>


        </dl>

    </article>

</section>

